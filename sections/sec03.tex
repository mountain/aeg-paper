This section derives the central flow equation governing how assignment values propagate through geometric space: $\frac{da}{ds} = \mu \cos \theta + a \lambda \sin \theta$, where $\theta$ represents the angle of movement. The flow equation can be reformulated in various ways, including its coordinate-free form ($||\nabla a|| = \sqrt{\mu^2 + a^2 \lambda^2}$), which is an Eikonal equation equivalent to a special Hamilton-Jacobi equation.

The section demonstrates that the flow equation is consistent with discrete generating processes and can be expressed in contour-gradient form. It establishes a relationship between arithmetic torsion and geometric area ($d\tau = \mu \lambda du dv$), linking non-commutativity in arithmetic to measurable geometric properties. The flow equation is shown to have a geometric propagation interpretation, where assignment values correspond to wavefront evolution in hyperbolic space. The section concludes with a discussion of the existence of metrics that make functions satisfy the flow equation, presenting a local morphing process while noting that the global case remains unsettled.

\subsection{Derivation of the flow equation}\label{sec:equation}

Consider an infinitesimal generating process on a Riemannian surface $M$ using two generators:
one for an additional action $\mu$ and the other for a multiplicative action $e^\lambda$.
These two generators are perpendicular.
This generation process produces an assignment $A: M \to R$ over the surface.

For any point with an assignment $a_0$, if we consider a movement of distance $\epsilon$ in a direction with angle $\theta$
over a time period of $\delta$, we can establish the following:

\[
    a_{\delta} = (a_0 + \mu \epsilon \cos \theta)e^{\lambda \epsilon \sin \theta}
\]

or

\[
    a_{\delta} = a_0 e^{\lambda \epsilon \sin \theta} + \mu \epsilon \cos \theta
\]

Both formula can be simplified to the same result:

\[
    a_{\delta} = a_0 + \epsilon (a_0 \lambda \sin \theta + \mu \cos \theta)
\]

Then, we have the following equation:

\[
    \frac{1}{\delta} (a_{\delta} - a_0) = \frac{\epsilon}{\delta} (\mu \cos \theta + x_0 \lambda \sin \theta)
\]

When both $\delta$ and $\epsilon$ are towards zero, we get $da / dt$, and hence

\[
    \frac{da}{dt} = u (\mu \cos \theta + a \lambda \sin \theta)
\]

Or, we can change it to another form

\begin{equation}
    \frac{da}{ds} = \mu \cos \theta + a \lambda \sin \theta\label{eq:flow}
\end{equation}

We name this equation~\eqref{eq:flow} as the flow equation.

The left side of this equation is governed by the distance structure, while the right side is governed by the angle structure.
So that the isometrics of the surface keep the flow equation~\eqref{eq:flow}.

We can also get a direct formal solution of the flow equation~\eqref{eq:flow}(details in Appendix~\ref{sec:directformalsolution}).

\begin{equation}
   a = (a_0 + \frac{\mu}{\lambda} \cot \theta) e^{\lambda s \sin \theta} - \frac{\mu}{\lambda} \cot \theta\label{eq:solution}
\end{equation}

\subsection{Discrete generating}\label{subsec:discrete-generating}

In section~\ref{subsec:generated-structure}, we have discussed a discrete generating process.
Since flow equation governs an infinitesimal generating process,
we will show the above discrete generating process can be emerged from the solution of the flow equation~\eqref{eq:solution} naturally.
We expand the formula by the Taylor series:

\[
    a =  a_0 e^{\lambda s \sin \theta} + \frac{\mu}{\lambda} [1 + \lambda s \sin \theta + \frac{1}{2!} (\lambda s \sin \theta)^2  + \frac{1}{3!} (\lambda s \sin \theta)^3 + \cdots - 1] \cot \theta
\]

Change the formula slightly:
\[
    a = a_0 e^{\lambda s \sin \theta} + \mu s \cos \theta + \frac{\mu}{\lambda} \sin \theta \cos \theta (\frac{\lambda^2s^2}{2!} + \frac{\lambda^3s^3}{3!} \sin \theta + \frac{\lambda^4s^4}{4!} \sin^2 \theta + \cdots)
\]

By the formula of double angle, we have
\[
    a = a_0 e^{\lambda s \sin \theta} + \mu s \cos \theta + \frac{\mu}{2\lambda} \sin 2\theta (\frac{\lambda^2s^2}{2!} + \frac{\lambda^3s^3}{3!} \sin \theta + \frac{\lambda^4s^4}{4!} \sin^2 \theta + \cdots)
\]

We denote
\begin{equation}
    \Psi(s) = \frac{1}{2!} + \frac{\lambda s}{3!} \sin \theta + \frac{\lambda^2 s^2}{4!} \sin^2 \theta + \cdots
\end{equation}

Then we have
\begin{equation}
    a = a_0 e^{\lambda s \sin \theta} + \mu s \cos \theta + \frac{\mu\lambda}{2} s^2 \Psi(s) \sin 2\theta
\end{equation}

This formula gives the discrete generating process, when $\theta = \frac{k \pi}{2}, k = 0, 1, 2, 3\cdots, s = 0, 1, 2, 3\cdots$, we have

\begin{equation}
    a = a_0 e^{\lambda s \sin \theta} + \mu s \cos \theta
\end{equation}

Especially, we have the following four cases:
\begin{itemize}
\item $\theta = 0$: $a_s = a_0 + \mu s$
\item $\theta = \frac{\pi}{2}$: $a_s = a_0 e^{\lambda s}$
\item $\theta = \pi$: $a_s = a_0 - \mu s$
\item $\theta = \frac{3 \pi}{2}$: $a_s = a_0 e^{- \lambda s} $
\end{itemize}

This result is straightforward, but it demonstrates that the infinitesimal generating process is consistent with the discrete generating process.
And this expands our toolset, enabling us to explore the interplay between discrete and infinitesimal generating processes.

\subsection{The contour-gradient form of flow equation}\label{subsec:the-contour-gradient-form}

It is easy to derive the contour equation in the local coordinate

\begin{equation}
    \mu \cos \theta_c + a \lambda \sin \theta_c = 0\label{eq:contour}
\end{equation}

then we have

\begin{equation}
    \theta_c = - \arctan \frac{\mu}{a \lambda}\label{eq:contourangle}
\end{equation}

the contour and the gradient are perpendicular to each other

\begin{equation}
    \theta_g = \pm \frac{\pi}{2} - \arctan \frac{\mu}{a \lambda}\label{eq:gradientangle}
\end{equation}

then along $\theta_g$ we have

\begin{equation}
    \frac{da}{ds} = \mu \cos (\pm \frac{\pi}{2} - \arctan \frac{\mu}{a \lambda}) + a \lambda \sin (\pm \frac{\pi}{2} - \arctan \frac{\mu}{a \lambda})
    \label{eq:alonggradient}
\end{equation}

\begin{equation}
    \frac{da}{ds} = \pm \sqrt{\mu^2 + \lambda^2 a^2}\label{eq:grad}
\end{equation}

By introducing the right-hand rotation angle $\phi$ along the gradient direction, we can establish a local polar coordinate system based on the gradient and contour lines.
Then the growth rate of $a$ along the angle $\phi$ is

\begin{equation}
    \frac{da}{ds} = \mu \cos (\frac{\pi}{2} - \arctan \frac{\mu}{a \lambda} + \phi) + a \lambda \sin (\frac{\pi}{2} - \arctan \frac{\mu}{a \lambda} + \phi)
    \label{eq:fourfold}
\end{equation}

And the simplified equation is

\begin{equation}
    \frac{da}{ds} = \sqrt {\mu^2 + a^2 \lambda^2} \cos \phi\label{eq:contourgradient}
\end{equation}

or

\begin{equation}
    \frac{da_{\phi}}{ds_{\phi}} = \sqrt {\mu^2 + a^2 \lambda^2} \cos \phi\label{eq:contourgradient2}
\end{equation}

if we want to emphasize the path is along the angle $\phi$.

The equation~\eqref{eq:contourgradient} is the flow equation in the contour-gradient coordinate system.

Equation~\eqref{eq:contourgradient} is solvable, and we get the relation between $a$ and $s$:

\begin{equation}\label{eq:rel_a_s}
    \tanh(\lambda s \cos \phi - c) = \frac{\lambda a}{\sqrt{\mu^2 + \lambda^2 a^2}}
\end{equation}

we can further simplify the equation to

\begin{equation}
  a = \pm \frac{\mu}{\lambda} \sinh(\lambda s \cos \phi - c)\label{eq:gradevo}
\end{equation}

Under the initial condition $a = a_0$ when $s = 0$, we can get the following equation:

\begin{equation}
    a = \frac{\mu}{\lambda} \sinh(\lambda s \cos \phi + \arcsinh \frac{a_0 \lambda}{\mu})\label{eq:gradevo2}
\end{equation}

or

\begin{equation}
    a = - \frac{\mu}{\lambda} \sinh(\lambda s \cos \phi - \arcsinh \frac{a_0 \lambda}{\mu})\label{eq:gradevo3}
\end{equation}

In this coordinate system, the additional line and the multiplicative line are:

\begin{equation}
    \phi = \arccos \frac{\mu}{\sqrt {\mu^2 + a^2 \lambda^2}} \label{eq:additionalline}
\end{equation}

\begin{equation}
    \phi = \arcsin \frac{\mu}{\sqrt {\mu^2 + a^2 \lambda^2}}\label {eq:mulitiplcativeline}
\end{equation}

\subsection{Arithmetic coordinate and area formula}\label{subsec:descartes-coordinate}
We begin our exploration by examining the flow equation~\eqref{eq:flow} within the framework of a local polar coordinate system:

\begin{equation}
    \frac{da}{ds} = \mu \cos \theta + a \lambda \sin \theta
\end{equation}

In an effort to re-contextualize this equation, we set $du = \cos \theta ds$ and $dv = \sin \theta ds$,
where $du$ and $dv$ are perpendicular infinitesimal movements.
We can use these movements to construct a local Descartes coordinate system, and the first fundamental form of this system is:

\begin{equation}
    ds^2 = A^2 du^2 + B^2 dv^2
\end{equation}

Thereby this enables us to express the flow equation in a different light:

\begin{equation}
    da = \mu du + a \lambda dv
\end{equation}

Our attention now turns to the concept of arithmetic torsion, particularly at an infinitesimal level.
Delving into the interplay between two infinitesimal generating processes, we observe that:

\begin{equation}
    d\tau = (a_0 + \mu du) e^{\lambda dv} - (a_0 e^{\lambda dv} + \mu du)
\end{equation}

From this relationship, we deduce:

\begin{equation}
    d\tau = \mu du (e^{\lambda dv} - 1)
\end{equation}

This leads us to an area formula, capturing the essence of this interaction:

\begin{equation}
    d\tau = \mu \lambda du dv \label{eq:area_formula}
\end{equation}

and because the area element have a form

\begin{equation}
    dS = |AB| du dv \label{eq:area_element}
\end{equation}

Then we have
\begin{equation}
    \frac{d\tau}{\mu \lambda} = \frac{dS}{|AB|}\label{eq:area_formula2}
\end{equation}

This formula is compelling as it establishes a link between area elements and arithmetic torsion.
Such formulations find parallels in the realms of classic analysis and differential geometry.
For instance, they resonate with concepts akin to Stokes' theorem or the Gauss-Bonnet theorem.
We intend to expand upon this formula in the ensuing section\ref{sec:curvature},
aiming to forge a connection with curvature and delve into the intricacies of the Gauss-Bonnet theorem.

It's noteworthy to emphasize the distinctiveness of the local Descartes coordinate system.
This system, by integrating the assignment, lays the foundation for a theoretical framework.
We refer to this as the \emph{arithmetic coordinate system}, given its unique properties and alignment with arithmetic principles.

\subsection{The coordinate-free form of flow equation}\label{subsec:coordinate-free}

From the contour-gradient form of the flow equation~\eqref{eq:contourgradient}, we can derive a coordinate-free form of the flow equation.
Let's consider the direction of \(\phi = 0\) in the contour-gradient coordinate system, and we have

\[
    \frac{da}{ds}|_{\phi = 0} = \sqrt{\mu^2 + a^2 \lambda^2} \cos 0
\]

Notice the gradient of \(a\) is not dependent on the coordinate system, and we have the coordinate-free form of the flow equation:

\begin{equation}\label{eq:coordinate-free}
||\nabla a|| = \sqrt{\mu^2 + a^2 \lambda^2}
\end{equation}

It should be noted that the coordinate-free form of the flow equation~\eqref{eq:coordinate-free} is an Eikonal equation,
and can be viewed as a special Hamiltonâ€“Jacobi equation
\[
H(x, a, \nabla a) = 0
\]

where the Hamiltonian is

\begin{equation}\label{eq:hamiltonian}
    H(x, a, p) = ||p|| - \sqrt{\mu^2 + a^2 \lambda^2}
\end{equation}

\subsection{Propagation and Rectification}\label{subsec:propagation}

While Equation \eqref{eq:contourgradient} can be solved directly, its structure suggests a simplifying change of variables that "rectifies" the flow. Let us define a new variable $f$ by
\[
f = \operatorname{arcsinh}\left(\frac{\lambda a}{\mu}\right).
\]
This choice is motivated by the desire to find a variable whose gradient has a constant magnitude. Using the chain rule,
\[
\nabla f = \frac{df}{da}\nabla a = \frac{\lambda/\mu}{\sqrt{1+(\lambda a/\mu)^2}}\nabla a = \frac{\lambda}{\sqrt{\mu^2+\lambda^2 a^2}}\nabla a.
\]
Taking the norm of both sides and using the Eikonal form \eqref{eq:coordinate-free}, we find
\[
\|\nabla f\|=\frac{\lambda}{\sqrt{\mu^2+\lambda^2 a^2}}\|\nabla a\|=\lambda.
\]
The rectified variable $f$ has a gradient of constant magnitude. Consequently, its rate of change along a direction at an angle $\phi$ to the gradient is simply
\[
\frac{df}{ds}=\langle \nabla f, T \rangle = \|\nabla f\|\cos\phi = \lambda\cos\phi.
\]
This linearized equation is trivial to integrate: $f(s) = f_0 + \lambda s \cos\phi$. Substituting back for $a$ gives $a = (\mu/\lambda)\sinh(f)$, which yields the general solution for propagation from an initial value $f_0$:
\begin{equation}\label{eq:gradevo}
a=\frac{\mu}{\lambda}\sinh\!\Big(\lambda s\cos\phi+\operatorname{arcsinh}\frac{\lambda a_0}{\mu}\Big).
\end{equation}
In the case of propagation along the gradient ($\phi=0$) from a zero-value contour ($a_0=0$), this simplifies to
\[
a=\pm\frac{\mu}{\lambda}\sinh(\lambda s).
\]
This form is reminiscent of the circumference of a hyperbolic circle of radius $s$, $C \propto \sinh(\sqrt{-k}s)$, suggesting that $a$ can be interpreted as a propagating wavefront in a space of constant negative curvature. A detailed geometric interpretation will be given in Section~\ref{sec:firstkind}.

\subsection{Flow and function}\label{subsec:flow-and-function}

In this section, we aim to present novel insight into functions.
Namely, the treatment of functions as flows will be discussed.

\begin{definition}\label{def:projection}
Given a function $k$ on the real domain $R$, we can introduce a mapping $l$ on the arithmetic expression space $H$ such that the following diagram commutes.

\begin{center}
    \begin{tikzcd}
        H && H \\
        R && R
        \arrow["l", from=1-1, to=1-3]
        \arrow["\nu"', from=1-1, to=2-1]
        \arrow["\nu", from=1-3, to=2-3]
        \arrow["k"', from=2-1, to=2-3]
    \end{tikzcd}
\end{center}

where $\nu$ is the evaluation function of the expression. Then we call the mapping $l$ is the promotion of the function $k$,
or function $k$ is the projection of the mapping $l$.
\end{definition}

Giving an arithmetic expression space as definition at the beginning of the section\ref{subsec:meshgrid},
we will show examples of flows as functions in the following Section~\ref{sec:firstkind}.

\subsection{The existence theorem}\label{subsec:existence-theorem}

There are two existence problems related to the flow equation~\eqref{eq:flow}.
The first existence problem concerns the existence of a function $a$ on a Riemannian surface $S$ that satisfies the flow equation~\eqref{eq:flow}.
The second existence problem concerns the existence of a metric $g$ on a Riemannian surface $S$ that makes a function $a$ satisfy the flow equation~\eqref{eq:flow}.

We can proof there is a local morphing process over metric $g$ to make a function $a$ satisfy the flow equation~\eqref{eq:flow} locally.
But the global morphing process is more complicated, and we need to consider the global structure of the surface $S$, which is still not settled.

\begin{lemma}(By Le Zhang)
    Given an oriented compact Riemannian surface $S$, and a smooth function $a$ over $S$, there exists a metric $g$ on $S$ that makes $a$
    satisfying the flow equation~\eqref{eq:flow}.
    \label{prop:existence2nd}
\end{lemma}

\begin{proof}
    \emph{Local perspective}:

    Consider a point \( p \) on the surface \( S \), and there is a neighborhood \( U \) around \( p \).
    In this area, we can find a local isothermal coordinate system in which the metric takes the form:
    \[ ds^2 = e^{2\rho}(du^2 + dv^2), \]
    where \( u \) and \( v \) are the coordinates of \( U \), and \( \rho \) is a function of \( u, v \) in \( U \).
    The gradient of \( a \) in this local isothermal coordinate system is expressed as:
    \[ \nabla a = \frac{\partial a}{\partial u} du + \frac{\partial a}{\partial v} dv. \]
    Using the definition of the directional derivative, we obtain:
    \[ \frac{da_{\psi}}{ds_{\psi}} = ||\nabla a|| \cos \psi, \]
    where \( ||\nabla a|| \) is the norm of \( \nabla a \), and \( \psi \) is the angle between \( \nabla a \) and the direction of movement.

    Now, considering the flow equation~\ref{eq:contourgradient2} in the gradient-contour coordinate system, we have:
    \[ \frac{da_{\phi}}{ds_{\phi}} = \sqrt{\mu^2 + a^2 \lambda^2} \cos \phi. \]

    Note that \( ||\nabla a|| \) is fixed for the given function \( a \) and the local coordinate system, and \( \sqrt{\mu^2 + a^2 \lambda^2} \) is also fixed for the given function \( a \).
    We can scale \( e^{2\rho} \) with a linear factor \( \alpha \) to make \( ||\nabla a|| \) match the fixed value of \( \sqrt{\mu^2 + a^2 \lambda^2} \),
    thus we have a morphing process controlled by \( \alpha \) that
    \begin{align}
    ds^2 &= \alpha e^{2 \rho}(du^2 + dv^2)\label{eq:morphing} \\
         &= e^{2 \rho + \ln \alpha}(du^2 + dv^2).
    \end{align}

    Under the morphing ratio \( \alpha \), we have:

    \begin{equation}
      ||\nabla_\alpha a|| = \alpha^{-1} ||\nabla a||,
    \end{equation}

    and when \( \alpha \) is set to the value of:

    \[ ||\nabla_\alpha a|| = \sqrt{\mu^2 + a^2 \lambda^2}, \]

    the flow equation~\eqref{eq:flow} is satisfied in the local coordinate system.

    The morphing ratio \( \alpha \) is calculated as follows:
    \begin{equation}
        \alpha = \frac{||\nabla a||}{\sqrt{\mu^2 + a^2 \lambda^2}}\label{eq:ratio}.
    \end{equation}
    \qedhere
\end{proof}

When we consider the broader scope of the surface \( S \), it's possible to extend the morphing process to every point,
ensuring that the flow equation~\eqref{eq:flow} is satisfied on a global scale.
However, this expansion necessitates a harmonious integration of the morphing process across neighboring locales.
Specifically, this means that the morphing should not only preserve the circles centered at point \( p \) within its immediate local chart
but also maintain the integrity of these circles within the adjacent charts of point \( p \).
In essence, the morphing process must be seamlessly coordinated across the various local regions to achieve a unified global transformation.
How to achieve this harmonious integration remains an open question, and further exploration is needed to address this challenge.
